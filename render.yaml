services:
  - type: web
    name: econova-plataforma
    runtime: python3
    buildCommand: |
      echo "üöÄ Iniciando construcci√≥n del proyecto..."
      pip install --upgrade pip
      pip install -r requirements.txt --no-cache-dir
      echo "‚úÖ Dependencias instaladas"
      echo "üîç Ejecutando verificaciones pre-despliegue..."
      python check_render_deployment.py
      echo "‚úÖ Verificaciones completadas"
      python init_render_db.py
      echo "‚úÖ Base de datos inicializada"
    startCommand: gunicorn --bind 0.0.0.0:$PORT --workers 2 --threads 4 --timeout 120 app:app
    healthCheckPath: /health
    envVars:
      - key: FLASK_ENV
        value: production
      - key: PYTHON_VERSION
        value: 3.9.18
      - key: API_VERSION
        value: 1.0.0
      - key: RENDER
        value: "true"
      - key: PRODUCTION
        value: "true"
    # Variables de entorno cr√≠ticas (configurar en dashboard de Render):
    # - DATABASE_URL (PostgreSQL connection string)
    # - SECRET_KEY (clave segura aleatoria de al menos 32 caracteres)
    # - GROQ_API_KEY (para chatbot)
    # - OPENAI_API_KEY (opcional, para funcionalidades avanzadas)
    # - MAIL_SERVER, MAIL_PORT, MAIL_USE_TLS, MAIL_USERNAME, MAIL_PASSWORD
    # - CORS_ORIGINS (URLs permitidas, ej: https://tu-dominio.onrender.com)
    # - GOOGLE_SHEETS_CREDENTIALS_PATH (opcional)
    # - TWILIO_ACCOUNT_SID, TWILIO_AUTH_TOKEN, TWILIO_PHONE_NUMBER (opcional)
